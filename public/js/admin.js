// Generated by CoffeeScript 1.10.0
(function() {
  $(function() {
    var $body, deleteLocation, deleteLog, init, saveLog;
    $body = $('body');
    init = function() {
      $body.on('click', 'header a.delete', deleteLocation);
      $body.on('submit', 'form.log', saveLog);
      return $body.on('click', 'form.log a.delete', deleteLog);
    };
    deleteLocation = function(event) {
      var confirmation, location, url;
      event.preventDefault();
      location = this;
      confirmation = confirm('Are you sure?');
      if (confirmation) {
        url = location.href;
        return $.ajax({
          type: 'DELETE',
          url: url,
          error: function(jqXHR, status, error) {
            return console.log(jqXHR, status, error);
          },
          success: function(object, status, jqXHR) {
            return $(location).parent('.cell').remove();
          }
        });
      }
    };
    saveLog = function(event) {
      var $logForm, data, url;
      event.preventDefault();
      $logForm = $(this);
      data = $logForm.serialize();
      url = $logForm.attr('action');
      return $.ajax({
        type: 'POST',
        url: url,
        data: data,
        error: function(jqXHR, status, error) {
          return console.log(jqXHR, status, error);
        },
        success: function(response, status, jqXHR) {
          return console.log(response);
        }
      });
    };
    deleteLog = function(event) {
      var $log, confirmation, url;
      event.preventDefault();
      confirmation = confirm('Are you sure?');
      if (confirmation) {
        url = this.href;
        $log = $(this).parents('form.log');
        return $.ajax({
          type: 'DELETE',
          url: url,
          error: function(jqXHR, status, error) {
            return console.log(jqXHR, status, error);
          },
          success: function(object, status, jqXHR) {
            return $log.remove();
          }
        });
      }
    };
    return init();
  });

}).call(this);
